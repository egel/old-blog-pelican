<!DOCTYPE html>
<html lang=en> <head><title>Tasting of Arch Linux - The Egel's Blog</title><!-- Using the latest rendering mode for IE --><meta http-equiv=X-UA-Compatible content=IE=edge><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0"><link href=http://egel.pl/extras/favicon.png rel=icon><link rel=canonical href=http://egel.pl/tasting-of-arch-linux.html><meta name=author content="Maciej Sypień"><meta name=keywords content=linux,arch,terminal><meta name=description content="Whole process of installation and my reflections upon the Arch Linux."><meta property=og:site_name content="The Egel's Blog"><meta property=og:type content=article><meta property=og:title content="Tasting of Arch Linux"><meta property=og:url content=http://egel.pl/tasting-of-arch-linux.html><meta property=og:description content="Whole process of installation and my reflections upon the Arch Linux."><meta property=article:published_time content=2016-11-18><meta property=article:section content=Diary><meta property=article:tag content=linux><meta property=article:tag content=arch><meta property=article:tag content=terminal><meta property=article:author content="Maciej Sypień"><!-- Bootstrap --><link rel=stylesheet href=http://egel.pl/theme/css/styles.css type=text/css><link href=http://egel.pl/feeds/all.atom.xml type=application/atom+xml rel=alternate title="The Egel's Blog ATOM Feed"></head> <body> <nav class="navbar navbar-default"> <div class=container-fluid> <div class=navbar-header> <button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#navbar aria-expanded=false aria-controls=navbar> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a href=http://egel.pl/ class=navbar-brand> The Egel's Blog </a> </div> <div id=navbar class="navbar-collapse collapse"> <ul class="nav navbar-nav navbar-right"> <li><a href=http://egel.pl>Home</a></li> <li><a href=http://egel.pl/pages/about-me.html>About me</a></li> <li> <a href=http://egel.pl/reading-list.html>Reading list</a> </li> <li> <a href=http://egel.pl/archives.html>Archives</a> </li> </ul> </div><!--/.nav-collapse --> </div><!--/.container-fluid --> </nav> <header class=intro-header> <div class=container> <div class=row> <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"> <div class=site-heading> <h1>Do more in less time</h1> <hr class=small> <span class=subheading>Simplicity and clarity of the implementation</span> </div> </div> </div> </div> </header> <div class=container> <div class=row> <div class="col-sm-3 sidebar sidebar-tablet"> <div class=aboutme> <h4>About the author</h4> <img class="avatar thumbnail" src=https://secure.gravatar.com/avatar/4d66c5a2d6be57e7cb9bdef200417b4d?s=200> <p> Programmer, soundtracks enthusiast, astrophysics fan. Occasionally hacking this blog with new articles. </p> </div> <ul class="list-group social-list"> <li> <ul class=list-inline id=social> <li><a href=https://twitter.com/MaciejSypien target=_blank><i class="fa fa-twitter-square fa-lg"></i></a></li> <li><a href=https://github.com/egel target=_blank><i class="fa fa-github-square fa-lg"></i></a></li> <li><a href=https://www.linkedin.com/in/maciejsypien target=_blank><i class="fa fa-linkedin-square fa-lg"></i></a></li> <li><a href=http://egel.pl/feeds/all.atom.xml title="Feed atom" target=_blank><i class="fa fa-lg fa-rss-square"></i></a></li> </ul> </li> </ul> <section> <ul class=list-group> <li> <h4>Categories</h4> <ul id=categories> <li> <a href=http://egel.pl/category/diary.html>Diary</a> </li> <li> <a href=http://egel.pl/category/discovery.html>Discovery</a> </li> <li> <a href=http://egel.pl/category/how-to.html>How to</a> </li> <li> <a href=http://egel.pl/category/self-improvement.html>Self improvement</a> </li> </ul> </li> <li><h4><span class=icon-label>Tags</span></h4> <ul class="list-inline tagcloud" id=tags> <li class=tag-4> <a href=http://egel.pl/tag/angularjs.html>angularjs</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/apache.html>apache</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/apiary.html>apiary</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/arch.html>arch</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/console.html>console</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/domains.html>domains</a> </li> <li class=tag-2> <a href=http://egel.pl/tag/frontend.html>frontend</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/git.html>git</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/gui.html>gui</a> </li> <li class=tag-2> <a href=http://egel.pl/tag/install.html>install</a> </li> <li class=tag-1> <a href=http://egel.pl/tag/latex.html>latex</a> </li> <li class=tag-1> <a href=http://egel.pl/tag/linux.html>linux</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/mysql.html>mysql</a> </li> <li class=tag-2> <a href=http://egel.pl/tag/nginx.html>nginx</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/osx.html>osx</a> </li> <li class=tag-2> <a href=http://egel.pl/tag/pelican.html>pelican</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/php.html>php</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/sublime.html>sublime</a> </li> <li class=tag-1> <a href=http://egel.pl/tag/terminal.html>terminal</a> </li> <li class=tag-1> <a href=http://egel.pl/tag/text-editor.html>text-editor</a> </li> <li class=tag-1> <a href=http://egel.pl/tag/university.html>university</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/vim.html>vim</a> </li> <li class=tag-2> <a href=http://egel.pl/tag/wordpress.html>wordpress</a> </li> </ul> </li> </ul> </section> </div> <div class=col-sm-9> <section id=content class=single-article> <article> <header class=page-header> <div class=post-info> <span class=published> <time datetime=2016-11-18T00:00:00+01:00>Nov 18, 2016</time> </span> <span class=published> · Category</span> <a href=http://egel.pl/category/diary.html>Diary</a> &middot; <i class="fa fa-tags text-muted"></i> <a href=http://egel.pl/tag/linux.html>linux</a>, <a href=http://egel.pl/tag/arch.html>arch</a>, <a href=http://egel.pl/tag/terminal.html>terminal</a> </div><!-- /.post-info --> <h1> Tasting of Arch Linux <!-- <a href="http://egel.pl/tasting-of-arch-linux.html" rel="bookmark" title="Permalink to Tasting of Arch Linux">
          </a> --> </h1> </header> <div class=entry-content> <div class=intro-article-image-sm> <p><img alt="Linux logo" src=http://egel.pl/images/archlinux_logo.png></p> </div> <p>I have to admit that installation of Arch Linux can be difficult for many people, but that exactly is real fun!</p> <p>Few days ago I've tried to install Arch on my virtual machine then on my laptop and I could not find anything that I didn't like. Yeah, I agree that there are many decisions you have to decide during installation of Arch. For example: manual setting up of partitions, current date, downloading all related packages, then finally install whole system. For many (unfortunately) it's just the beginning, because after the installation you have a bare system - console and that is it. You need to install and configure GUI and other important stuff on your own, but actually that is real fun!</p> <p>The longest part for me was the downloading and installation packages from the Net. This took me around 45 minutes to download the system and GUI interface (gnome).</p> <p>Beside the installation process, I love the whole idea of having one release in contrast to Ubuntu. You have only one major version and you stick to it - until that community decide to change it.</p> <p>Below I would like to share my whole process and preferences during the setting up the Arch.</p> <h3>Partitioning hard drives</h3> <p>Display all drives on PC. I have only one drive called <code>/dev/sda</code>.</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre>1
2</pre></div></td><td class=code><div class=highlight><pre>fdisk -l
cfdisk /dev/sda
</pre></div> </td></tr></table> <p>I've got 500GB drive (with real space of 465GB), but the drive has one hidden partition for WinRecovery with size around 18GB (I'm not using it right now).</p> <p>So, now I split a bit rest of my drive space for 2 additional partitions.</p> <blockquote> <p>Many IT guys will be whimper a bit of having only one general partition for <code>/</code>, but I found it more useful for me in daily work.</p> <p><strong>Note</strong>: If you have disk bigger then 2TB use <a href=https://en.wikipedia.org/wiki/GUID_Partition_Table><code>GPT</code></a> instead of <code>DOS</code>, if using of <code>MBR</code> is not obligatory.</p> </blockquote> <ul> <li>18GB hidden WinRecovery partition (not used)</li> <li>16GB for <code>/swap</code> with type <code>linux swap</code> (82)</li> <li>~431GB for <code>/</code> with <strong>bootable</strong> flag and type <code>linux</code> (83)</li> </ul> <p>For more take a look on <a href=https://wiki.archlinux.org/index.php/partitioning>partitioning page</a> on Arch wiki.</p> <h3>Downloading basic packages</h3> <blockquote> <p>I have tried installation on my virtual box then again on my laptop. The problem that I face to, was internet connection through WiFi. There is several way of doing this. You can use <code>wifi-menu</code> to setup temporary connection for downloading packages and after installation setup <code>network-manager</code>.</p> </blockquote> <p>In this part we will format our partitions and enable Linux SWAP:</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5</pre></div></td><td class=code><div class=highlight><pre>mksf.ext4 /dev/sda2
mount /dev/sda2 /mnt
mkswap /dev/sda1
swapon /dev/sda2
pacstrap /mnt base base-devel <span class=c># most basic packages</span>
</pre></div> </td></tr></table> <p>If you don't want to install anything more for now, you can omit below packages, but I recommend to install them also just for more efficient usage before setting up the <code>network-manager</code>.</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre>1
2</pre></div></td><td class=code><div class=highlight><pre>pacstrap /mnt dialog wpa_supplicant network-manager-applet ldns <span class=c># for connecting via wifi-menu after install</span>
pacstrap /mnt sudo zsh wget curl <span class=c># additional packages</span>
</pre></div> </td></tr></table> <h3>Configuring the installation</h3> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class=code><div class=highlight><pre>arch-chroot /mnt
passwd root
vi /etc/locale.gen    <span class=c># uncoment all for you lang: en_US</span>
locale-gen
ln -s /usr/share/zoneinfo/Europe/Berlin /etc/localtime
timedatectl <span class=nb>set</span>-ntp <span class=nb>true</span>
hwclock --systohc
<span class=nb>echo </span>vbox &gt; /etc/hostname

<span class=c># installing grub</span>
pacman -S grub-bios
grub-install /dev/sda

<span class=c># generate system info file</span>
mkinitcpio -p linux

grub-mkconfig -o /boot/grub/grub.cfg
<span class=nb>exit</span> <span class=c># from /mnt root</span>

<span class=c># generate partition info</span>
genfstab /mnt &gt;&gt; /mnt/etc/fstab
umount -R /mnt
</pre></div> </td></tr></table> <blockquote> <p>This password is the most important of all. Write it down somewhere to not forget, we will need it later.</p> </blockquote> <h3>Connect to internet</h3> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4</pre></div></td><td class=code><div class=highlight><pre>ip link
systemctl <span class=nb>enable </span>dhcpcd.service
systemctl start dhcpcd.service
ping google.com
</pre></div> </td></tr></table> <p>or copy profile from examples</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4</pre></div></td><td class=code><div class=highlight><pre>cp /etc/netctl/examples/ethernet-dhcp /etc/netctl/
vim /etc/netctl/ethernet-dhcp    <span class=c># change Interface=enp0s3</span>
netctl <span class=nb>enable </span>ethernet-dhcp
netctl start ethernet-dhcp
</pre></div> </td></tr></table> <blockquote> <p>If above not work try manual install upon result from <code>ip link</code>, in my case the Ethernet device name is called <code>enp0s3</code></p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre>1
2</pre></div></td><td class=code><div class=highlight><pre>ip link
dhcpcd enp0s3
</pre></div> </td></tr></table> </blockquote> <h3>Create user</h3> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre>1
2
3</pre></div></td><td class=code><div class=highlight><pre>useradd -m -g users -G wheel,storage,power,sys,adm -s /bin/zsh maciej
passwd maciej
vim /etc/sudoers    <span class=c># Uncomment: wheel ALL=(ALL) ALL</span>
</pre></div> </td></tr></table> <p><strong>Now SWITCH to new created user!</strong> To do it <code>logout</code> from root user just to safety purpose.</p> <blockquote> <p>Why? Because when you use <strong>root</strong> you can do everything (it is good when you now what you're doing), but it's not about what you can or can't do, it's about you. You're more secure from yourself actions for example just using <code>sudo</code> program.</p> <p>It's good approach - but hey, you already know this, right? ;)</p> </blockquote> <h3>Further steps</h3> <p>Now we'll install additional useful stuff. You may or may not to install it, it's up to you.</p> <p>My <strong>must have</strong> list.</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre>1
2</pre></div></td><td class=code><div class=highlight><pre>sudo pacman -Syu
sudo pacman -S gvim git tmux htop
</pre></div> </td></tr></table> <p>The list:</p> <ul> <li>For bash I usually install <code>bash-completion</code>.</li> <li>For checking hardware <code>lshw hwinfo</code>.</li> <li>For supporting different drives I install <code>exfat-utils dosfstools jfsutils ntfs-3g mtools</code> and for partitioning I like <code>gparted</code> and <code>gpart</code> for fixing drives.</li> <li>For graphics <code>gimp inkscape</code> and <code>imagemagick</code> for console operations.</li> <li>For FTP <code>filezilla</code>.</li> <li>For SSH <code>openssh</code> is obvious choice!</li> <li>For LaTeX I usually install all packages <code>texlive-most texlive-lang</code> and <code>texstudio</code></li> </ul> <h3>Install display manager</h3> <p>I choose <a href=https://www.gnome.org/gnome-3/ >Gnome3</a> for my graphical environment, because now many problems has been fixed by maintainers and it's looks quite nice.</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre>1
2</pre></div></td><td class=code><div class=highlight><pre>sudo pacman -S gnome gnome-extra gnome-tweek-tool
sudo systemctl <span class=nb>enable </span>gdm.service
</pre></div> </td></tr></table> <p>Reboot system with <code>sudo reboot</code> and we're done with installation of GUI.</p> <h3>Install the nVidia drivers</h3> <p>First we check which graphic card we have:</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre>1</pre></div></td><td class=code><div class=highlight><pre>lspci -k <span class=p>|</span> grep -A <span class=m>2</span> -E <span class=s2>&quot;(VGA|3D)&quot;</span>
</pre></div> </td></tr></table> <p>In my laptop I've got <strong>GeForce GT 425m</strong>, so according to <a href>Arch Linux wiki about nvidia</a>. I have to install <code>nvidia nvidia-libgl</code> and enable service.</p> <blockquote> <p>It might wants to uninstall <code>mesa-libgl</code> package (this package have some problems with handling animations for some graphic cards), so agree for that by pressing (Y).</p> </blockquote> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre>1
2</pre></div></td><td class=code><div class=highlight><pre>sudo pacman -S nvidia nvidia-utils nvidia-libgl
sudo systemctl <span class=nb>enable </span>nvidia-persistenced.service
</pre></div> </td></tr></table> <p>Then we have to reboot the system and check <code>lsmod | grep nvidia</code>.</p> <h3>The end</h3> <p>Now you should have full operational Arch Linux system - and yes, you should be proud of yourself!</p> <p>Thanks for staying with me to the end. I hope that little tutorial of mine, help you a bit during your journey of setting up you private Arch instance ;)</p> </div> <!-- /.entry-content --> <section class=well id=related-posts> <h4>Few related posts:</h4> <ul> <li><a href=http://egel.pl/install-the-latest-nvidia-drivers-for-linux.html>Install the latest nVidia drivers for Linux</a></li> <li><a href=http://egel.pl/git-push-guardian.html>Git push guardian</a></li> <li><a href=http://egel.pl/install-archived-app-into-linux.html>Install archived app into Linux</a></li> <li><a href=http://egel.pl/install-and-configure-dnsmasq-on-linux.html>Install and configure dnsmasq on linux</a></li> </ul> </section> <hr> <section class=comments id=comments> <h2>Comments</h2> <div id=disqus_thread></div> <script type=text/javascript>
      var disqus_shortname = "egel";
      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function () {
        var s = document.createElement('script');
        s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
      }());
    </script> <noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript> <!-- End Disqus Code --> </section> </article> </section> </div> </div> </div> <div class="container sidebar-phone"> <div class=row> <div class="col-xs-12 sidebar"> <div class=aboutme> <h4>About the author</h4> <img class="avatar thumbnail" src=https://secure.gravatar.com/avatar/4d66c5a2d6be57e7cb9bdef200417b4d?s=200> <p> Programmer, soundtracks enthusiast, astrophysics fan. Occasionally hacking this blog with new articles. </p> </div> <ul class="list-group social-list"> <li> <ul class=list-inline id=social> <li><a href=https://twitter.com/MaciejSypien target=_blank><i class="fa fa-twitter-square fa-lg"></i></a></li> <li><a href=https://github.com/egel target=_blank><i class="fa fa-github-square fa-lg"></i></a></li> <li><a href=https://www.linkedin.com/in/maciejsypien target=_blank><i class="fa fa-linkedin-square fa-lg"></i></a></li> <li><a href=http://egel.pl/feeds/all.atom.xml title="Feed atom" target=_blank><i class="fa fa-lg fa-rss-square"></i></a></li> </ul> </li> </ul> <section> <ul class=list-group> <li> <h4>Categories</h4> <ul id=categories> <li> <a href=http://egel.pl/category/diary.html>Diary</a> </li> <li> <a href=http://egel.pl/category/discovery.html>Discovery</a> </li> <li> <a href=http://egel.pl/category/how-to.html>How to</a> </li> <li> <a href=http://egel.pl/category/self-improvement.html>Self improvement</a> </li> </ul> </li> <li><h4><span class=icon-label>Tags</span></h4> <ul class="list-inline tagcloud" id=tags> <li class=tag-4> <a href=http://egel.pl/tag/angularjs.html>angularjs</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/apache.html>apache</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/apiary.html>apiary</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/arch.html>arch</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/console.html>console</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/domains.html>domains</a> </li> <li class=tag-2> <a href=http://egel.pl/tag/frontend.html>frontend</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/git.html>git</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/gui.html>gui</a> </li> <li class=tag-2> <a href=http://egel.pl/tag/install.html>install</a> </li> <li class=tag-1> <a href=http://egel.pl/tag/latex.html>latex</a> </li> <li class=tag-1> <a href=http://egel.pl/tag/linux.html>linux</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/mysql.html>mysql</a> </li> <li class=tag-2> <a href=http://egel.pl/tag/nginx.html>nginx</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/osx.html>osx</a> </li> <li class=tag-2> <a href=http://egel.pl/tag/pelican.html>pelican</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/php.html>php</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/sublime.html>sublime</a> </li> <li class=tag-1> <a href=http://egel.pl/tag/terminal.html>terminal</a> </li> <li class=tag-1> <a href=http://egel.pl/tag/text-editor.html>text-editor</a> </li> <li class=tag-1> <a href=http://egel.pl/tag/university.html>university</a> </li> <li class=tag-4> <a href=http://egel.pl/tag/vim.html>vim</a> </li> <li class=tag-2> <a href=http://egel.pl/tag/wordpress.html>wordpress</a> </li> </ul> </li> </ul> </section> </div> </div> </div> <footer class=footer> <div class=container> <div class=row> <div class=col-xs-12> <a href=# class=scrollToTop><i class="fa fa-arrow-up"></i></a> <p> &copy; Copyright 2016 &middot; The Egel's Blog &middot; The <a href=https://en.wikipedia.org/wiki/KISS_principle title="Keep it stupid simple" target=_blank>KISS</a> Principle &middot; Build with <a href=http://docs.getpelican.com/ target=_blank>pelican</a>. </p> </div> </div> </div> </footer> <script src=http://egel.pl/theme/js/scripts.min.js></script> <!-- Google Analytics --> <script type=text/javascript>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-26456669-2', 'auto');
      ga('send', 'pageview');
    </script> <!-- End Google Analytics Code --> <script type=text/javascript>var addthis_config = {"data_track_addressbar": true};</script> <script type=text/javascript src=//s7.addthis.com/js/300/addthis_widget.js#pubid=True></script> </div> </div> </body> </html>